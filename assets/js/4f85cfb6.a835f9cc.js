"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4339],{738:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>l});var t=s(4848),i=s(8453);const c={title:"Async utils functions",tags:["utils"]},o="Async utils",r={id:"docs/core/utils/async",title:"Async utils functions",description:"Summary",source:"@site/docs/docs/01-core/utils/async.md",sourceDirName:"docs/01-core/utils",slug:"/docs/core/utils/async",permalink:"/docs/core/utils/async",draft:!1,unlisted:!1,editUrl:"https://github.com/strapi/strapi/tree/main/docs/docs/docs/01-core/utils/async.md",tags:[{label:"utils",permalink:"/tags/utils"}],version:"current",frontMatter:{title:"Async utils functions",tags:["utils"]},sidebar:"docs",previous:{title:"Providers",permalink:"/upload"},next:{title:"Introduction",permalink:"/docs/utils/pack-up/intro"}},a={},l=[{value:"Summary",id:"summary",level:2},{value:"Detailed design",id:"detailed-design",level:2},{value:"mapAsync",id:"mapasync",level:3},{value:"reduceAsync",id:"reduceasync",level:3},{value:"pipeAsync",id:"pipeasync",level:3},{value:"When to use",id:"when-to-use",level:3},{value:"Should I add my function here ?",id:"should-i-add-my-function-here-",level:3},{value:"Potential improvements",id:"potential-improvements",level:2},{value:"Resources",id:"resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"async-utils",children:"Async utils"}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"Async utils are grouping all function that interact with async stuff like Promises."}),"\n",(0,t.jsx)(n.h2,{id:"detailed-design",children:"Detailed design"}),"\n",(0,t.jsx)(n.h3,{id:"mapasync",children:"mapAsync"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"mapAsync"})," function is an asynchronous version of the ",(0,t.jsx)(n.code,{children:"Array.prototype.map"})," method."]}),"\n",(0,t.jsx)(n.p,{children:"Example usage:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const input = [1, 2, 3];\n\nconst output = await mapAsync(input, async (item) => {\n  return item * 2;\n});\n\nconsole.log(output); // [2, 4, 6]\n"})}),"\n",(0,t.jsx)(n.h3,{id:"reduceasync",children:"reduceAsync"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"reduceAsync"})," function is an asynchronous version of the ",(0,t.jsx)(n.code,{children:"Array.prototype.reduce"})," method."]}),"\n",(0,t.jsx)(n.p,{children:"Example usage:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const input = [1, 2, 3];\n\nconst reducer = reduceAsync(input);\nconst output = await reducer(async (accumulator, item) => {\n  return accumulator + item;\n}, 0);\n\nconsole.log(output); // 6\n"})}),"\n",(0,t.jsx)(n.h3,{id:"pipeasync",children:"pipeAsync"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"pipeAsync"})," function is a utility function for composing asynchronous functions. It takes a list of functions as input, and returns a new function that applies each function in turn to the input."]}),"\n",(0,t.jsx)(n.p,{children:"Example usage:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"async function addOne(input: number): Promise<number> {\n  return input + 1;\n}\n\nasync function double(input: number): Promise<number> {\n  return input * 2;\n}\n\nconst addOneAndDouble = pipeAsync(addOne, double);\n\nconst output = await addOneAndDouble(3);\n\nconsole.log(output); // 8\n"})}),"\n",(0,t.jsx)(n.h3,{id:"when-to-use",children:"When to use"}),"\n",(0,t.jsx)(n.p,{children:"Every time the code has to act with promises and iterate other them, an async utils function should be used."}),"\n",(0,t.jsx)(n.h3,{id:"should-i-add-my-function-here-",children:"Should I add my function here ?"}),"\n",(0,t.jsx)(n.p,{children:"Any util function that manipulates promises can be included in this utils section."}),"\n",(0,t.jsx)(n.p,{children:"Please consider the next point if a lots of functions are available in the async section."}),"\n",(0,t.jsx)(n.h2,{id:"potential-improvements",children:"Potential improvements"}),"\n",(0,t.jsx)(n.p,{children:"Some ideas of functions that could be added:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Other ",(0,t.jsx)(n.code,{children:"Array.prototype"})," methods: ",(0,t.jsx)(n.code,{children:"filterAsync"}),", ",(0,t.jsx)(n.code,{children:"someAsync"}),", ",(0,t.jsx)(n.code,{children:"everyAsync"}),", ",(0,t.jsx)(n.code,{children:"findAsync"}),", ",(0,t.jsx)(n.code,{children:"findIndexAsync"}),", ",(0,t.jsx)(n.code,{children:"flatMapAsync"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"retryAsync"}),": A function that retries an asynchronous operation a specified number of times if it fails. It takes an asynchronous operation and a number of retries as input, and returns the result of the operation if it succeeds within the specified number of retries, or throws an error if it fails after all retries."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"timeoutAsync"}),": A function that adds a timeout to an asynchronous operation. It takes an asynchronous operation and a timeout duration as input, and returns the result of the operation if it completes within the specified timeout, or throws an error if it takes longer than the timeout."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["If we begin to use lots of async utils function, we may consider to migrate to a specialized library like ",(0,t.jsx)(n.a,{href:"http://caolan.github.io/async/v3/",children:"asyncjs"})]}),"\n",(0,t.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/strapi/strapi/blob/9b36c3b10adaa00fd3596853abc63122632c36fe/packages/core/utils/lib/async.js",children:"Async file in Strapi"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"http://caolan.github.io/async/v3/",children:"http://caolan.github.io/async/v3/"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>r});var t=s(6540);const i={},c=t.createContext(i);function o(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);